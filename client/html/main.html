<div class="d-flex justify-content-center h-100">
	<h1>Smartphone as a security token</h1>

	<div class="container" id="files_container">

		<div style="float:right;">
			<div class="custom-file" style="display: none;">
				<input type="file" class="custom-file-input" id="customFile">
				<label class="custom-file-label" for="customFile">Choose file</label>
			</div>

			<input type="button" value="Upload" class="btn btn-default" onclick="document.getElementById('customFile').click();" />
		</div>

		<div class="table-responsive">
			<table id="filesTable" class="table table-bordered table-dark table-striped table-hover" style="margin-top: 15px;box-shadow: 0px 2px 5px #000;"">
				<colgroup>
					<col span=" 1" style="width: 20%;">
				<col span="1" style="width: 20%;">
				<col span="1" style="width: 60%;">
				<col span="1" style="width: 30px;">
				<col span="1" style="width: 30px;">
				</colgroup>

				<thead>
					<tr>
						<th>Filename</th>
						<th>Owner</th>
						<th>SHA-256</th>
						<th>&nbsp;</th>
						<th>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
				<tfoot style="font-size: 0;">
					<tr>
						<td colspan="5">&nbsp;</td>
					</tr>
				</tfoot>
			</table>
		</div>

	</div>

	<button id="logoutBtn" type="button" class="btn btn-default">Logout</button>
</div>


<script>
	$('#logoutBtn').click(function(e) {
		logout();
		e.preventDefault();
	});

	$(".custom-file-input").on("change", function() {
		// Add the following code if you want the name of the file appear on select
		//var fileName = $(this).val().split("\\").pop();
		//$(this).siblings(".custom-file-label").addClass("selected").html(fileName);

		const files = document.querySelector('[type=file]').files;
		const formData = new FormData();

		for (let i = 0; i < files.length; i++) {
			let file = files[i]

			formData.append('files[]', file)
		}

		loaderStart();

		postData("files.php", formData)
		.then(data => {
			if (!data.success) {
				for (let k in data.errors) {
					alert(data.errors[k]);
				}
			}

			loaderEnd();
		})
	});
</script>
